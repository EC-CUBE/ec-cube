# Codeception Test Suite Configuration
#
# Suite for acceptance tests.
# Perform tests in browser using the WebDriver or PhpBrowser.
# If you need both WebDriver and PHPBrowser tests - create a separate suite.

class_name: AcceptanceTester
coverage:
    remote: true
modules:
    enabled:
        - \Helper\Acceptance
        - WebDriver
        - Asserts
        - MailCatcher
        - REST:
              depends: PhpBrowser
              url: 'http://localhost:8080/'
              shortDebugResponse: 300 # only the first 300 characters of the response
        - Symfony:
              part: SERVICES
              app_path: "/src/Eccube/"
              em_service: 'doctrine.orm.entity_manager'
              kernel_class: 'Eccube\Kernel'
        - Doctrine2:
              depends: Symfony
    config:
        WebDriver:
            browser: 'chrome'
            url: 'http://localhost:8080/'
            port: '9515'
            window_size: 1680x3000
            wait: 10
        MailCatcher:
            url: '%MAILCATCHER_HOST%'
            port: 1080
step_decorators:
    - \Codeception\Step\Retry
env:
    default:
        modules:
            config:
                WebDriver:
                    browser: firefox

    front: # Backward compatibility
        modules:
            config:
                WebDriver:
                    browser: firefox
    admin: # Backward compatibility
        modules:
            config:
                WebDriver:
                    browser: firefox
    firefox:
        modules:
            config:
                WebDriver:
                    browser: firefox
                    capabilities:
                        firefox_profile: '/root/ff_profile.zip.b64'

    chrome:
        modules:
            config:
                WebDriver:
                    browser: chrome
                    capabilities:
                        chromeOptions:
                            prefs:
                                download.default_directory: '%PWD%/codeception/_support/_downloads'
    chrome-headless:
        modules:
            config:
                WebDriver:
                    browser: chrome
                    capabilities:
                        chromeOptions:
                            args: [ "--headless", "--disable-gpu" ]
                            prefs:
                                download.default_directory: '%PWD%/codeception/_support/_downloads'
